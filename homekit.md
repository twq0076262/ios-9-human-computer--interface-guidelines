## 3.7 HomeKit
通过 HomeKit，用户能够方便地在家中使用 iOS 设备上的智能家居应用来操控家中相关联的设备(无论这些设备制造商是谁)。最好的智能家居应用集成 HomeKit 和 iOS 系统来帮助用户：

- 创建家居环境、房间和区域
- 添加、寻找和移动家居设备(如灯泡或温度调节装置)
- 定义能够使一组多个家居设备响应的行为
- 管理用户
- 用 Siri 来操控他们的家居设施
想要了解如何在你的应用中使用 HomeKit，可参阅 [HomeKIt Developer Guide](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/HomeKitDeveloperGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40015050)。下面的指南可以帮助你做出一个容易上手、令人愉悦的智能家居程序。

**不要想当然地认为你的设备会是用户所设置的首个设备。**你的应用除了能让用户很容易就能创建家居环境、房间和区域，还需要让用户能方便地将你的设备接入之前已经设置好了的区域中。

**让添加新设备变得简单。**不要强迫用户在添加设备之前注册账号。最好让你的应用能自动发现新的设备并将他们显著地展示在用户界面上。确保所展示的信息足够充分让用户可以轻易辨识出该家居设备。

**帮助用户辨认他们正在调节的设备。**给用户一个能够帮助他们从物理属性辨认设备的控制器。例如，你可以让用户通过闪一下灯泡来确认他们正在调节的是他们想要调节的那个。

**让用户能够通过多种方式来搜寻设备。**当天的时间、季节和用户当前的位置会在特定的时刻成为判别某些设备是否重要的影响因素。因此，你的应用应该允许用户能在家中按类型、名称、或者位置的方式来搜寻设备。

**为家中已接入的设备提供推荐的操作集。**操作集允许用户设定在某种情景下让多个家居设备按照特定的方式行动。例如，一个“离开”操作集可以将房屋内的温度调低、关闭电灯和锁上所有房门。你的应用可以向用户推荐一些已经设定好了的操作集或者让用户创建自定义操作集。当用户能够基于房间或区域去创建自定义操作集时，让用户可以从你推荐的设备列表中进行选择，通常能使用户获得更好的体验。

**使用友好的交谈式语言让你的应用平易近人、易于使用。**智能家居概念可能会懵到用户，应避免使用他们可能不理解的缩写和技术术语。例如，HomeKit 是指代 API 的专用技术术语，它就不应该在你的应用中使用。

注意：如果你是苹果 MFi 认证许可商，请访问 MFi 门户网站查看设备包装的命名及消息通知的规则。

**与 Siri 互动。**通过 Siri，使用一个简单的陈述句就能控制执行复杂的操作。Siri 能够识别操作集、房屋、房间和区域的名称，并且能够理解像“Siri，把前门关了”、“Siri，把楼上的灯关了”和“Siri，把多媒体房的温度调高一点”这样的陈述。遵循以下准则能帮助你为用户提供使用 Siri 操控设备时的良好体验：

- **使用 Siri 能够识别的功能名称，而非设备名称。**一个设备可能提供多种功能(例如，一个既有风扇功能又有照明功能的风扇吊灯)，因此，帮助用户区分这些功能是很重要的。最佳方案是让用户在一系列不包含公司名称及型号的限定的名称中进行选择，并且允许他们以后编辑。你所推荐的名称应该使用规范的、容易理解的词语来描述功能，并可选择是否包含家中的位置信息，例如“客厅灯”或者“车库门”。你还可以让用户指定一种控制插座开关的通用口令，例如“Siri，把灯关了”，来控制所有的灯具和其相关的设备
- **当用户配置操作集的时候，告诉用户如何通过 Siri 去操控它。**举个例子，当“电影”这个操作已经确认配置完毕时，让用户知道他可以通过跟 Siri 说“Siri，把家调成电影模式”这样的话来激活这个操作。 注意，当用户单独对 Siri 说出某操作的名称时，同样也能激活那个操作。Siri 能够识别系统预置以及用户自定义的操作集，这些已配置的操作集至少包含一项操作
**帮助用户设置触发机制。**在 iOS9 中，HomeKit 支持触发机制：当满足特定的时间、地点或其他设备的行为的条件时激活操作的方式。比如用户可以设置一个当太阳落山且车库门打开时，就打开厨房灯操作的触发机制。设置一个包含多个项目的条件关系容易使人感到混乱，因此，将你的设置界面做得简单易用至关重要。举例来说，使用与人们平常说话一样的表达方式来展示项目、属性和逻辑，就更容易使人理解。